"use strict";(globalThis.webpackChunkbrain=globalThis.webpackChunkbrain||[]).push([[8950],{2252:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"playbooks/test-driven-design/python/pytest-cheatsheet","title":"pytest Templates & Cheatsheet","description":"Quick Reference","source":"@site/docs/playbooks/test-driven-design/python/pytest-cheatsheet.md","sourceDirName":"playbooks/test-driven-design/python","slug":"/playbooks/test-driven-design/python/pytest-cheatsheet","permalink":"/playbooks/test-driven-design/python/pytest-cheatsheet","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"pytest Templates & Cheatsheet"},"sidebar":"playbooks","previous":{"title":"Python Logging Cheatsheet","permalink":"/playbooks/test-driven-design/python/logging"},"next":{"title":"pytest-mock Templates & Cheatsheet","permalink":"/playbooks/test-driven-design/python/pytest-mock-cheatsheet"}}');var l=s(4848),r=s(8453);const i={title:"pytest Templates & Cheatsheet"},a="pytest Templates & Cheatsheet",c={},d=[{value:"Quick Reference",id:"quick-reference",level:2},{value:"Common Imports",id:"common-imports",level:3},{value:"Plug-and-Play Templates",id:"plug-and-play-templates",level:2},{value:"Basic Test Template",id:"basic-test-template",level:3},{value:"Test with Fixtures",id:"test-with-fixtures",level:3},{value:"Test with Setup/Teardown Fixture",id:"test-with-setupteardown-fixture",level:3},{value:"Exception Testing Template",id:"exception-testing-template",level:3},{value:"Parameterized Test Template",id:"parameterized-test-template",level:3},{value:"Test with Markers",id:"test-with-markers",level:3},{value:"Test Class Template",id:"test-class-template",level:3},{value:"Fixture with Scope",id:"fixture-with-scope",level:3},{value:"Test with Multiple Fixtures",id:"test-with-multiple-fixtures",level:3},{value:"Test with conftest.py",id:"test-with-conftestpy",level:3},{value:"Common Assertions",id:"common-assertions",level:2},{value:"Steps to Run Tests",id:"steps-to-run-tests",level:2},{value:"Command Line",id:"command-line",level:3},{value:"Running Specific Tests",id:"running-specific-tests",level:3},{value:"With Markers",id:"with-markers",level:3},{value:"Fixture Scopes",id:"fixture-scopes",level:2},{value:"Annotations &amp; Decorators",id:"annotations--decorators",level:2},{value:"Useful Links",id:"useful-links",level:2}];function o(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.header,{children:(0,l.jsx)(t.h1,{id:"pytest-templates--cheatsheet",children:"pytest Templates & Cheatsheet"})}),"\n",(0,l.jsx)(t.h2,{id:"quick-reference",children:"Quick Reference"}),"\n",(0,l.jsx)(t.h3,{id:"common-imports",children:"Common Imports"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-python",children:"import pytest\n"})}),"\n",(0,l.jsx)(t.h2,{id:"plug-and-play-templates",children:"Plug-and-Play Templates"}),"\n",(0,l.jsx)(t.h3,{id:"basic-test-template",children:"Basic Test Template"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-python",children:"# test_calculator.py\n\ndef add(x, y):\n    return x + y\n\ndef test_add_two_numbers_returns_sum():\n    # Arrange\n    a = 5\n    b = 3\n    \n    # Act\n    result = add(a, b)\n    \n    # Assert\n    assert result == 8\n"})}),"\n",(0,l.jsx)(t.h3,{id:"test-with-fixtures",children:"Test with Fixtures"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-python",children:'import pytest\n\n@pytest.fixture\ndef sample_data():\n    return {"a": 1, "b": 2, "c": 3}\n\ndef test_with_fixture(sample_data):\n    # Arrange & Act\n    total = sum(sample_data.values())\n    \n    # Assert\n    assert total == 6\n'})}),"\n",(0,l.jsx)(t.h3,{id:"test-with-setupteardown-fixture",children:"Test with Setup/Teardown Fixture"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-python",children:'import pytest\n\n@pytest.fixture\ndef database():\n    # Setup\n    db = connect_to_database()\n    yield db\n    # Teardown\n    db.close()\n\ndef test_query_database(database):\n    # Arrange & Act\n    result = database.query("SELECT * FROM users")\n    \n    # Assert\n    assert result is not None\n'})}),"\n",(0,l.jsx)(t.h3,{id:"exception-testing-template",children:"Exception Testing Template"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-python",children:'import pytest\n\ndef divide(a, b):\n    if b == 0:\n        raise ValueError("Cannot divide by zero")\n    return a / b\n\ndef test_divide_by_zero_raises_exception():\n    # Arrange\n    a = 10\n    b = 0\n    \n    # Act & Assert\n    with pytest.raises(ValueError) as exc_info:\n        divide(a, b)\n    \n    assert "Cannot divide by zero" in str(exc_info.value)\n'})}),"\n",(0,l.jsx)(t.h3,{id:"parameterized-test-template",children:"Parameterized Test Template"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-python",children:'import pytest\n\ndef add(x, y):\n    return x + y\n\n@pytest.mark.parametrize("a, b, expected", [\n    (1, 2, 3),\n    (5, 5, 10),\n    (-1, 1, 0),\n    (0, 0, 0),\n])\ndef test_add_multiple_cases(a, b, expected):\n    # Act\n    result = add(a, b)\n    \n    # Assert\n    assert result == expected\n'})}),"\n",(0,l.jsx)(t.h3,{id:"test-with-markers",children:"Test with Markers"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-python",children:"import pytest\n\n@pytest.mark.slow\ndef test_complex_operation():\n    # This test takes a long time\n    result = perform_complex_calculation()\n    assert result is not None\n\n@pytest.mark.integration\ndef test_api_integration():\n    # This test requires external API\n    response = call_external_api()\n    assert response.status_code == 200\n"})}),"\n",(0,l.jsx)(t.h3,{id:"test-class-template",children:"Test Class Template"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-python",children:'import pytest\n\nclass TestCalculator:\n    \n    def setup_method(self):\n        """Called before each test method"""\n        self.calculator = Calculator()\n    \n    def teardown_method(self):\n        """Called after each test method"""\n        self.calculator = None\n    \n    def test_add(self):\n        assert self.calculator.add(2, 3) == 5\n    \n    def test_subtract(self):\n        assert self.calculator.subtract(5, 2) == 3\n'})}),"\n",(0,l.jsx)(t.h3,{id:"fixture-with-scope",children:"Fixture with Scope"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-python",children:'import pytest\n\n@pytest.fixture(scope="module")\ndef shared_resource():\n    """Created once per test module"""\n    resource = initialize_expensive_resource()\n    yield resource\n    resource.cleanup()\n\n@pytest.fixture(scope="session")\ndef database_connection():\n    """Created once per test session"""\n    conn = create_database_connection()\n    yield conn\n    conn.close()\n'})}),"\n",(0,l.jsx)(t.h3,{id:"test-with-multiple-fixtures",children:"Test with Multiple Fixtures"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-python",children:'import pytest\n\n@pytest.fixture\ndef user():\n    return {"name": "John", "email": "john@example.com"}\n\n@pytest.fixture\ndef permissions():\n    return ["read", "write"]\n\ndef test_user_with_permissions(user, permissions):\n    # Arrange\n    user["permissions"] = permissions\n    \n    # Act\n    has_access = check_access(user)\n    \n    # Assert\n    assert has_access is True\n'})}),"\n",(0,l.jsx)(t.h3,{id:"test-with-conftestpy",children:"Test with conftest.py"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-python",children:'# conftest.py (shared fixtures)\nimport pytest\n\n@pytest.fixture\ndef api_client():\n    return APIClient()\n\n# test_api.py\ndef test_api_call(api_client):\n    response = api_client.get("/users")\n    assert response.status_code == 200\n'})}),"\n",(0,l.jsx)(t.h2,{id:"common-assertions",children:"Common Assertions"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-python",children:"# Equality\nassert value == expected\nassert value != unexpected\n\n# Comparison\nassert value > threshold\nassert value < threshold\nassert value >= threshold\nassert value <= threshold\n\n# Membership\nassert item in collection\nassert item not in collection\n\n# Type checking\nassert isinstance(obj, MyClass)\nassert type(obj) == MyClass\n\n# Truthiness\nassert value is True\nassert value is False\nassert value  # Truthy\nassert not value  # Falsy\n\n# None checks\nassert value is None\nassert value is not None\n\n# Exceptions\nwith pytest.raises(ValueError):\n    function_that_raises()\n\n# Approximate equality (for floats)\nassert value == pytest.approx(expected, rel=0.01)\n"})}),"\n",(0,l.jsx)(t.h2,{id:"steps-to-run-tests",children:"Steps to Run Tests"}),"\n",(0,l.jsx)(t.h3,{id:"command-line",children:"Command Line"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-bash",children:'# Run all tests in current directory and subdirectories\npytest\n\n# Run tests in specific file\npytest test_calculator.py\n\n# Run specific test function\npytest test_calculator.py::test_add\n\n# Run tests matching pattern\npytest -k "add"\n\n# Run tests with specific marker\npytest -m slow\n\n# Run with verbose output\npytest -v\n\n# Run with extra verbose output\npytest -vv\n\n# Show print statements\npytest -s\n\n# Show local variables on failure\npytest -l\n\n# Run last failed tests only\npytest --lf\n\n# Run failed tests first, then rest\npytest --ff\n\n# Stop on first failure\npytest -x\n\n# Stop after N failures\npytest --maxfail=3\n\n# Show coverage report\npytest --cov=src --cov-report=html\n'})}),"\n",(0,l.jsx)(t.h3,{id:"running-specific-tests",children:"Running Specific Tests"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-bash",children:'# Run test class\npytest test_calculator.py::TestCalculator\n\n# Run test method in class\npytest test_calculator.py::TestCalculator::test_add\n\n# Run tests in directory\npytest tests/integration/\n\n# Run tests matching name pattern\npytest -k "test_add or test_subtract"\n'})}),"\n",(0,l.jsx)(t.h3,{id:"with-markers",children:"With Markers"}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-bash",children:'# Run only slow tests\npytest -m slow\n\n# Run all except slow tests\npytest -m "not slow"\n\n# Run integration tests\npytest -m integration\n\n# Run multiple markers\npytest -m "slow and integration"\n'})}),"\n",(0,l.jsx)(t.h2,{id:"fixture-scopes",children:"Fixture Scopes"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Scope"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Description"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"When to Use"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"function"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Default. Run once per test function"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Most common case"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"class"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Run once per test class"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Shared setup for class tests"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"module"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Run once per test module"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Expensive setup shared across tests"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"session"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Run once per test session"}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Database connections, API clients"})]})]})]}),"\n",(0,l.jsx)(t.h2,{id:"annotations--decorators",children:"Annotations & Decorators"}),"\n",(0,l.jsxs)(t.table,{children:[(0,l.jsx)(t.thead,{children:(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Decorator"}),(0,l.jsx)(t.th,{style:{textAlign:"left"},children:"Description"})]})}),(0,l.jsxs)(t.tbody,{children:[(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"@pytest.fixture"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Marks a function as a fixture"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"@pytest.mark.parametrize"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Parameterizes a test function"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"@pytest.mark.skip"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Skips a test"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"@pytest.mark.skipif"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Conditionally skips a test"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"@pytest.mark.xfail"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Marks test as expected to fail"})]}),(0,l.jsxs)(t.tr,{children:[(0,l.jsx)(t.td,{style:{textAlign:"left"},children:(0,l.jsx)(t.code,{children:"@pytest.mark.slow"})}),(0,l.jsx)(t.td,{style:{textAlign:"left"},children:"Custom marker (requires registration)"})]})]})]}),"\n",(0,l.jsx)(t.h2,{id:"useful-links",children:"Useful Links"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.a,{href:"https://docs.pytest.org/en/stable/",children:"pytest Documentation"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.a,{href:"https://docs.pytest.org/en/stable/fixture.html",children:"pytest Fixtures Guide"})}),"\n",(0,l.jsx)(t.li,{children:(0,l.jsx)(t.a,{href:"https://docs.pytest.org/en/stable/how-to/parametrize.html",children:"pytest Parametrization"})}),"\n"]})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>i,x:()=>a});var n=s(6540);const l={},r=n.createContext(l);function i(e){const t=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);