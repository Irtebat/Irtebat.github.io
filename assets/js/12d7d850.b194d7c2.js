"use strict";(globalThis.webpackChunkbrain=globalThis.webpackChunkbrain||[]).push([[8306],{2192:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"*Private/JioStar/Archive/Schema Registry Access Issue ( RBAC )","title":"Schema Registry Access Issue ( RBAC )","description":"1. In CC:","source":"@site/docs/*Private/JioStar/Archive/Schema Registry Access Issue ( RBAC ).md","sourceDirName":"*Private/JioStar/Archive","slug":"/*Private/JioStar/Archive/Schema Registry Access Issue ( RBAC )","permalink":"/*Private/JioStar/Archive/Schema Registry Access Issue ( RBAC )","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{}}');var t=s(4848),c=s(8453);const a={},i=void 0,l={},o=[];function u(e){const n={a:"a",br:"br",code:"code",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["In CC:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Confirm the principal (service account) tied to that API key"}),"\n",(0,t.jsx)(n.li,{children:"Confirm the role binding is on Schema Registry Subject resources in the same environment as the SR endpoint"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Confirm the binding covers the exact subject naming strategy your serializer uses."}),"\n",(0,t.jsx)(n.li,{children:"Test setting auto.register.schemas to False"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Test Strategy"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"confluent login\nconfluent environment list\nconfluent environment use <ENV_ID>\n"})}),"\n",(0,t.jsx)(n.p,{children:'confluent iam service-account create sr_test_client --description "service account to test sr rbac"\nID : sa-xqv8dkq'}),"\n",(0,t.jsx)(n.p,{children:"confluent schema-registry cluster describe"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'\t{\n\t  "name": "Stream Governance Package",\n\t  "cluster": "lsrc-x1gxg",\n\t  "endpoint_url": "https://psrc-5mn3g.ap-southeast-2.aws.confluent.cloud",\n\t  "private_endpoint_url": "https://lsrc-x1gxg.ap-southeast-2.aws.private.confluent.cloud",\n\t  "catalog_endpoint_url": "https://psrc-5mn3g.ap-southeast-2.aws.confluent.cloud",\n\t  "used_schemas": "1083",\n\t  "available_schemas": "18917",\n\t  "free_schemas_limit": 20000,\n\t  "global_compatibility": "BACKWARD",\n\t  "mode": "READWRITE",\n\t  "cloud": "AWS",\n\t  "region": "ap-southeast-2",\n\t  "package": "ADVANCED"\n\t}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["confluent iam rbac role-binding create ",(0,t.jsx)(n.br,{}),"\n","--principal User",":sa-xqv8dkq"," ",(0,t.jsx)(n.br,{}),"\n","--role DeveloperRead ",(0,t.jsx)(n.br,{}),"\n","--environment env-xg59z ",(0,t.jsx)(n.br,{}),"\n","--schema-registry-cluster lsrc-x1gxg ",(0,t.jsx)(n.br,{}),"\n",'--resource "Subject:*"']}),"\n",(0,t.jsxs)(n.p,{children:["confluent iam rbac role-binding create ",(0,t.jsx)(n.br,{}),"\n","--principal User",":sa-xqv8dkq"," ",(0,t.jsx)(n.br,{}),"\n","--role DeveloperWrite ",(0,t.jsx)(n.br,{}),"\n","--environment env-xg59z ",(0,t.jsx)(n.br,{}),"\n","--schema-registry-cluster lsrc-x1gxg ",(0,t.jsx)(n.br,{}),"\n",'--resource "Subject:*"']}),"\n",(0,t.jsxs)(n.p,{children:["confluent api-key create ",(0,t.jsx)(n.br,{}),"\n","--resource lsrc-x1gxg ",(0,t.jsx)(n.br,{}),"\n","--service-account sa-xqv8dkq ",(0,t.jsx)(n.br,{}),"\n",'--description "SR key for sa-xqv8dkq"\nAPI Key  : V53HJCIP7QK6XIB4',(0,t.jsx)(n.br,{}),"\n","API Secret : cflt8LXVEKuLlqHUxU8hBHtEDyhN5CwQQFKsrC3iMv4OvgkQhFZdCxO6BlQG1DKg"]}),"\n",(0,t.jsxs)(n.p,{children:['SR_URL="',(0,t.jsx)(n.a,{href:"https://psrc-5mn3g.ap-southeast-2.aws.confluent.cloud",children:"https://psrc-5mn3g.ap-southeast-2.aws.confluent.cloud"}),'"\nSUBJECT="sr-demo-topic-value"']}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -sS -u "V53HJCIP7QK6XIB4:cflt8LXVEKuLlqHUxU8hBHtEDyhN5CwQQFKsrC3iMv4OvgkQhFZdCxO6BlQG1DKg" \\\n  -H "Content-Type: application/vnd.schemaregistry.v1+json" \\\n  -X POST "${SR_URL}/subjects/${SUBJECT}/versions" \\\n  --data \'{"schema":"{\\"type\\":\\"record\\",\\"name\\":\\"Payment\\",\\"namespace\\":\\"my.examples\\",\\"fields\\":[{\\"name\\":\\"id\\",\\"type\\":\\"string\\"},{\\"name\\":\\"amount\\",\\"type\\":\\"double\\"}]}"}\'\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'\t{"id":100842}\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -sS -u "V53HJCIP7QK6XIB4:cflt8LXVEKuLlqHUxU8hBHtEDyhN5CwQQFKsrC3iMv4OvgkQhFZdCxO6BlQG1DKg" \\\n  -H "Content-Type: application/vnd.schemaregistry.v1+json" \\\n  -X POST "${SR_URL}/subjects/${SUBJECT}/versions" \\\n  --data \'{"schema":"{\\"type\\":\\"record\\",\\"name\\":\\"Payment\\",\\"namespace\\":\\"my.examples\\",\\"fields\\":[{\\"name\\":\\"id\\",\\"type\\":\\"string\\"}]}"}\'\n'})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'\t{"id":100843}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["confluent iam rbac role-binding list ",(0,t.jsx)(n.br,{}),"\n","--principal User",":sa-xqv8dkq"," ",(0,t.jsx)(n.br,{}),"\n","--schema-registry-cluster lsrc-x1gxg ",(0,t.jsx)(n.br,{}),"\n","--environment env-xg59z ",(0,t.jsx)(n.br,{}),"\n",'--resource "subject:*"']}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"confluent iam rbac role-binding create \\ \n--principal User:<> \n\\ --role ResourceOwner \n\\ --environment <> \n\\ --schema-registry-cluster-id <> \n\\ --resource Subject:*\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -u ":" \\\n  -X DELETE \\\n  "${SR_URL}/subjects/${SUBJECT}/versions/{VERSION}"\n'})})]})}function d(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>i});var r=s(6540);const t={},c=r.createContext(t);function a(e){const n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);