"use strict";(globalThis.webpackChunkbrain=globalThis.webpackChunkbrain||[]).push([[6439],{486:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"playbooks/test-driven-design/python/setup","title":"Python Test Setup","description":"Installation","source":"@site/docs/playbooks/test-driven-design/python/setup.md","sourceDirName":"playbooks/test-driven-design/python","slug":"/playbooks/test-driven-design/python/setup","permalink":"/playbooks/test-driven-design/python/setup","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Python Test Setup"},"sidebar":"playbooks","previous":{"title":"pytest-mock Templates & Cheatsheet","permalink":"/playbooks/test-driven-design/python/pytest-mock-cheatsheet"}}');var i=t(4848),l=t(8453);const r={title:"Python Test Setup"},o="Python Test Setup",a={},c=[{value:"Installation",id:"installation",level:2},{value:"Basic pytest",id:"basic-pytest",level:3},{value:"With Mocking Support",id:"with-mocking-support",level:3},{value:"Using requirements.txt",id:"using-requirementstxt",level:3},{value:"Using pyproject.toml",id:"using-pyprojecttoml",level:3},{value:"Common Imports",id:"common-imports",level:2},{value:"pytest",id:"pytest",level:3},{value:"pytest-mock",id:"pytest-mock",level:3},{value:"Standard Library (unittest.mock)",id:"standard-library-unittestmock",level:3},{value:"Project Structure",id:"project-structure",level:2},{value:"Alternative Structure",id:"alternative-structure",level:3},{value:"Configuration",id:"configuration",level:2},{value:"pytest.ini",id:"pytestini",level:3},{value:"pyproject.toml",id:"pyprojecttoml",level:3},{value:"Virtual Environment Setup",id:"virtual-environment-setup",level:2},{value:"Using venv",id:"using-venv",level:3},{value:"Using virtualenv",id:"using-virtualenv",level:3},{value:"Using conda",id:"using-conda",level:3},{value:"IDE Configuration",id:"ide-configuration",level:2},{value:"VS Code",id:"vs-code",level:3},{value:"PyCharm",id:"pycharm",level:3},{value:"Running Tests in IDE",id:"running-tests-in-ide",level:3}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"python-test-setup",children:"Python Test Setup"})}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(n.h3,{id:"basic-pytest",children:"Basic pytest"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pip install pytest\n"})}),"\n",(0,i.jsx)(n.h3,{id:"with-mocking-support",children:"With Mocking Support"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pip install pytest pytest-mock\n"})}),"\n",(0,i.jsx)(n.h3,{id:"using-requirementstxt",children:"Using requirements.txt"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-txt",children:"pytest>=7.4.0\npytest-mock>=3.11.0\n"})}),"\n",(0,i.jsx)(n.h3,{id:"using-pyprojecttoml",children:"Using pyproject.toml"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'[project]\ndependencies = []\n\n[project.optional-dependencies]\ntest = [\n    "pytest>=7.4.0",\n    "pytest-mock>=3.11.0",\n]\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Install with: ",(0,i.jsx)(n.code,{children:'pip install -e ".[test]"'})]}),"\n",(0,i.jsx)(n.h2,{id:"common-imports",children:"Common Imports"}),"\n",(0,i.jsx)(n.h3,{id:"pytest",children:"pytest"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import pytest\n"})}),"\n",(0,i.jsx)(n.h3,{id:"pytest-mock",children:"pytest-mock"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"import pytest\n# 'mocker' is a fixture, passed as argument, not imported\n"})}),"\n",(0,i.jsx)(n.h3,{id:"standard-library-unittestmock",children:"Standard Library (unittest.mock)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"from unittest.mock import Mock, MagicMock, patch, PropertyMock\n"})}),"\n",(0,i.jsx)(n.h2,{id:"project-structure",children:"Project Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"project/\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 calculator.py\n\u251c\u2500\u2500 tests/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 test_calculator.py\n\u2502   \u2514\u2500\u2500 conftest.py\n\u2514\u2500\u2500 pytest.ini\n"})}),"\n",(0,i.jsx)(n.h3,{id:"alternative-structure",children:"Alternative Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"project/\n\u251c\u2500\u2500 calculator.py\n\u251c\u2500\u2500 test_calculator.py\n\u2514\u2500\u2500 pytest.ini\n"})}),"\n",(0,i.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"pytestini",children:"pytest.ini"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",children:"[pytest]\ntestpaths = tests\npython_files = test_*.py\npython_classes = Test*\npython_functions = test_*\naddopts = -v --tb=short\nmarkers =\n    slow: marks tests as slow\n    integration: marks tests as integration tests\n"})}),"\n",(0,i.jsx)(n.h3,{id:"pyprojecttoml",children:"pyproject.toml"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",children:'[tool.pytest.ini_options]\ntestpaths = ["tests"]\npython_files = ["test_*.py"]\npython_classes = ["Test*"]\npython_functions = ["test_*"]\naddopts = "-v --tb=short"\nmarkers = [\n    "slow: marks tests as slow",\n    "integration: marks tests as integration tests",\n]\n'})}),"\n",(0,i.jsx)(n.h2,{id:"virtual-environment-setup",children:"Virtual Environment Setup"}),"\n",(0,i.jsx)(n.h3,{id:"using-venv",children:"Using venv"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"python -m venv venv\nsource venv/bin/activate  # On Windows: venv\\Scripts\\activate\npip install pytest pytest-mock\n"})}),"\n",(0,i.jsx)(n.h3,{id:"using-virtualenv",children:"Using virtualenv"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"virtualenv venv\nsource venv/bin/activate\npip install pytest pytest-mock\n"})}),"\n",(0,i.jsx)(n.h3,{id:"using-conda",children:"Using conda"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"conda create -n test-env python=3.11\nconda activate test-env\npip install pytest pytest-mock\n"})}),"\n",(0,i.jsx)(n.h2,{id:"ide-configuration",children:"IDE Configuration"}),"\n",(0,i.jsx)(n.h3,{id:"vs-code",children:"VS Code"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Install Python extension"}),"\n",(0,i.jsx)(n.li,{children:"Install pytest extension"}),"\n",(0,i.jsxs)(n.li,{children:["Configure ",(0,i.jsx)(n.code,{children:"settings.json"}),":"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "python.testing.pytestEnabled": true,\n    "python.testing.unittestEnabled": false\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"pycharm",children:"PyCharm"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Go to Settings \u2192 Tools \u2192 Python Integrated Tools"}),"\n",(0,i.jsxs)(n.li,{children:["Set Default test runner to ",(0,i.jsx)(n.code,{children:"pytest"})]}),"\n",(0,i.jsx)(n.li,{children:"Configure test discovery patterns"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"running-tests-in-ide",children:"Running Tests in IDE"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"VS Code"}),": Click test icon in sidebar or use ",(0,i.jsx)(n.code,{children:"Ctrl+Shift+P"}),' \u2192 "Run Tests"']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"PyCharm"}),": Right-click test file \u2192 \"Run 'pytest in test_file.py'\""]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var s=t(6540);const i={},l=s.createContext(i);function r(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);