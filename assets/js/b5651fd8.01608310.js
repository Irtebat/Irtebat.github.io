"use strict";(globalThis.webpackChunkbrain=globalThis.webpackChunkbrain||[]).push([[950],{2252:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"playbooks/test-driven-design/python/pytest-cheatsheet","title":"pytest Cheatsheet","description":"A quick reference for testing with pytest.","source":"@site/docs/playbooks/test-driven-design/python/pytest-cheatsheet.md","sourceDirName":"playbooks/test-driven-design/python","slug":"/playbooks/test-driven-design/python/pytest-cheatsheet","permalink":"/playbooks/test-driven-design/python/pytest-cheatsheet","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"pytest Cheatsheet","description":"A quick reference for testing with pytest.","sidebar_label":"pytest"},"sidebar":"playbooks","previous":{"title":"Logging","permalink":"/playbooks/test-driven-design/python/logging"},"next":{"title":"Pytest Mocking","permalink":"/playbooks/test-driven-design/python/pytest-mock-cheatsheet"}}');var i=n(4848),r=n(8453);const a={title:"pytest Cheatsheet",description:"A quick reference for testing with pytest.",sidebar_label:"pytest"},l="pytest Cheatsheet",d={},o=[{value:"Installation",id:"installation",level:2},{value:"Imports",id:"imports",level:2},{value:"Running Tests",id:"running-tests",level:2},{value:"Basic Test Anatomy",id:"basic-test-anatomy",level:2},{value:"Fixtures",id:"fixtures",level:2},{value:"Fixture Scopes",id:"fixture-scopes",level:3},{value:"Setup/Teardown with yield",id:"setupteardown-with-yield",level:3},{value:"Parametrization",id:"parametrization",level:2},{value:"Exception Handling",id:"exception-handling",level:2},{value:"Markers",id:"markers",level:2},{value:"Useful Links",id:"useful-links",level:2}];function c(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"pytest-cheatsheet",children:"pytest Cheatsheet"})}),"\n",(0,i.jsx)(t.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"pip install pytest\n"})}),"\n",(0,i.jsx)(t.h2,{id:"imports",children:"Imports"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-python",children:"import pytest\n"})}),"\n",(0,i.jsx)(t.h2,{id:"running-tests",children:"Running Tests"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:'pytest                      # Run all tests in current dir and subdirs\npytest test_file.py         # Run tests in specific file\npytest -k "name"            # Run tests matching name substring\npytest -m "slow"            # Run tests with specific marker\npytest -v                   # Verbose output\npytest -s                   # Show stdout (print statements)\npytest --lf                 # Run last failed tests\n'})}),"\n",(0,i.jsx)(t.h2,{id:"basic-test-anatomy",children:"Basic Test Anatomy"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-python",children:"# test_example.py\n\ndef add(x, y):\n    return x + y\n\ndef test_add():\n    assert add(1, 2) == 3\n    assert add(-1, 1) == 0\n"})}),"\n",(0,i.jsx)(t.h2,{id:"fixtures",children:"Fixtures"}),"\n",(0,i.jsx)(t.p,{children:"Fixtures are used to provide data or setup state for tests."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-python",children:'import pytest\n\n@pytest.fixture\ndef sample_data():\n    return {"a": 1, "b": 2}\n\ndef test_with_fixture(sample_data):\n    assert sample_data["a"] == 1\n'})}),"\n",(0,i.jsx)(t.h3,{id:"fixture-scopes",children:"Fixture Scopes"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:'@pytest.fixture(scope="function")'})," (default): Run once per test function."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:'@pytest.fixture(scope="module")'}),": Run once per test module."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:'@pytest.fixture(scope="session")'}),": Run once per test session."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:'@pytest.fixture(scope="class")'}),": Run once per test class."]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"setupteardown-with-yield",children:"Setup/Teardown with yield"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-python",children:"@pytest.fixture\ndef db_connection():\n    conn = connect_db() # Setup\n    yield conn\n    conn.close()        # Teardown\n"})}),"\n",(0,i.jsx)(t.h2,{id:"parametrization",children:"Parametrization"}),"\n",(0,i.jsx)(t.p,{children:"Run a test multiple times with different arguments."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-python",children:'@pytest.mark.parametrize("input_a, input_b, expected", [\n    (1, 2, 3),\n    (5, 5, 10),\n    (-1, 1, 0),\n])\ndef test_add_params(input_a, input_b, expected):\n    assert add(input_a, input_b) == expected\n'})}),"\n",(0,i.jsx)(t.h2,{id:"exception-handling",children:"Exception Handling"}),"\n",(0,i.jsx)(t.p,{children:"Testing that expected exceptions are raised."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-python",children:"def test_divide_by_zero():\n    with pytest.raises(ZeroDivisionError):\n        1 / 0\n"})}),"\n",(0,i.jsx)(t.h2,{id:"markers",children:"Markers"}),"\n",(0,i.jsx)(t.p,{children:"Mark tests to group them (e.g., slow, smoke)."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-python",children:"@pytest.mark.slow\ndef test_complex_operation():\n    # ...\n    pass\n"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsxs)(t.em,{children:["Run with ",(0,i.jsx)(t.code,{children:"pytest -m slow"})]})}),"\n",(0,i.jsx)(t.h2,{id:"useful-links",children:"Useful Links"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://docs.pytest.org/en/stable/",children:"pytest Documentation"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://docs.pytest.org/en/stable/fixture.html",children:"pytest Fixtures Guide"})}),"\n"]})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>l});var s=n(6540);const i={},r=s.createContext(i);function a(e){const t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);